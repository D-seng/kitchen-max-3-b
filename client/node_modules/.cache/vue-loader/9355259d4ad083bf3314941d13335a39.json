{"remainingRequest":"/Users/darrensenger/workspace/current/kitchen-max-3-b/client/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/darrensenger/workspace/current/kitchen-max-3-b/client/src/components/Calendar2.vue?vue&type=template&id=46b5eab4","dependencies":[{"path":"/Users/darrensenger/workspace/current/kitchen-max-3-b/client/src/components/Calendar2.vue","mtime":1642659812761},{"path":"/Users/darrensenger/workspace/current/kitchen-max-3-b/client/node_modules/cache-loader/dist/cjs.js","mtime":1638459943317},{"path":"/Users/darrensenger/workspace/current/kitchen-max-3-b/client/node_modules/babel-loader/lib/index.js","mtime":1638459947335},{"path":"/Users/darrensenger/workspace/current/kitchen-max-3-b/client/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1638459950764},{"path":"/Users/darrensenger/workspace/current/kitchen-max-3-b/client/node_modules/cache-loader/dist/cjs.js","mtime":1638459943317},{"path":"/Users/darrensenger/workspace/current/kitchen-max-3-b/client/node_modules/vue-loader-v16/dist/index.js","mtime":1638459949352}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CjxoMT57e21UZXh0fX0ge3t5cn19PC9oMT4KPHA+LS0tLWFwcG9pbnRtZW50cy0tLS08L3A+Cjxicj4KPHA+e3thcHBvaW50bWVudHN9fTwvcD4KPGJyPgo8cD5zYXt7c2hvd0FwcG9pbnRtZW50c319PC9wPgogICAgPHA+e3ttb2RhbFZpc2libGV9fTwvcD4KICAgIDxidXR0b24gQGNsaWNrPSJzd2l0Y2hNbygncHJldicpIj5QcmV2PC9idXR0b24+CiAgICA8YnV0dG9uIEBjbGljaz0ic3dpdGNoTW8oJ25leHQnKSI+TmV4dDwvYnV0dG9uPgogICAgICAgIDxidXR0b24gQGNsaWNrPSJyZWFkQ2FjaGUoKSI+cmVhZENhY2hlPC9idXR0b24+CiAgICAgICAgPHA+e3tjYWNoZWRBcHB0c319PC9wPgoKCiAgICAgPGRpdiBjbGFzcz0iZ3JpZCBncmlkLWZsb3ctcm93IGdyaWQtY29scy03IGdyaWQtcm93cy03IGdhcC00IgogICAgIDprZXk9ImNhbGVuZGFyS2V5Ij4KICAgICAgPGRpdiBjbGFzcz0iYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3ctbGciCiAgICAgIHYtZm9yPSJjYWxEYXkgaW4gY2FsRGF5cyIgOmtleT0iY2FsRGF5LmRheSI+CiAgICAgICAgPGJ1dHRvbiBAY2xpY2sgPSJhZGRBcHB0KGNhbERheS5kYXkpIj57e2NhbERheS5kYXl9fTwvYnV0dG9uPgogICAgICAgICAgICA8ZGl2IHYtaWY9InNob3dBcHBvaW50bWVudHMiPgogICAgICAgICAgICA8IS0tIDxkaXYgdi1mb3I9ImFwcHQgaW4gcmVzdWx0LmdldEFwcG9pbnRtZW50cy5maWx0ZXIoaXRlbSA9PiBpdGVtLmRhdGUgPT09IGAke3lyfS0ke21vfS0ke2NhbERheS5kYXl9YCkiIDprZXk9ImFwcHQuX2lkIj4gLS0+CiAgICAgICAgICAgIDxkaXYgdi1mb3I9ImFwcHQgaW4gYXBwb2ludG1lbnRzLmZpbHRlcihpdGVtID0+IGl0ZW0uZGF0ZSA9PT0gYCR7eXJ9LSR7bW99LSR7Y2FsRGF5LmRheX1gKSIgOmtleT0iYXBwdC5faWQiPgogICAgICAgICAgICAgIDxDYXJkRGF5IHYtYmluZDpkYXlEZXRhaWxzPSJhcHB0Ii8+CiAgICAgICAgICAgICAgPCEtLSA8cD57e2FwcHR9fTwvcD4gLS0+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgPC9kaXY+CiAgPC9kaXY+CgogICAgPGRpdiB2LWlmPSJtb2RhbFZpc2libGUgPT09ICB0cnVlIj4KICAgIDxNb2RhbFZpZXc+CiAgICAgIDxNZWFsIGNsYXNzPSJ6LTUwIi8+CiAgICA8L01vZGFsVmlldz4KICAgICAgPC9kaXY+Cg=="},{"version":3,"sources":["/Users/darrensenger/workspace/current/kitchen-max-3-b/client/src/components/Calendar2.vue"],"names":[],"mappings":";AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACxB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1B,CAAC,CAAC,CAAC;AACH,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACtB,CAAC,CAAC,CAAC;AACH,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACxB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACtB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC9C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC1C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;;KAGxB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;KAC5D,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACjB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACzC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACzC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACxD,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5B,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YAC9H,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;cACzG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;cAClC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YACzB,CAAC,CAAC,CAAC,CAAC,CAAC;QACT,CAAC,CAAC,CAAC,CAAC,CAAC;;MAEP,CAAC,CAAC,CAAC,CAAC,CAAC;EACT,CAAC,CAAC,CAAC,CAAC,CAAC;;IAEH,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IAClC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACR,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACrB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACT,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/Users/darrensenger/workspace/current/kitchen-max-3-b/client/src/components/Calendar2.vue","sourceRoot":"","sourcesContent":["<template>\n<h1>{{mText}} {{yr}}</h1>\n<p>----appointments----</p>\n<br>\n<p>{{appointments}}</p>\n<br>\n<p>sa{{showAppointments}}</p>\n    <p>{{modalVisible}}</p>\n    <button @click=\"switchMo('prev')\">Prev</button>\n    <button @click=\"switchMo('next')\">Next</button>\n        <button @click=\"readCache()\">readCache</button>\n        <p>{{cachedAppts}}</p>\n\n\n     <div class=\"grid grid-flow-row grid-cols-7 grid-rows-7 gap-4\"\n     :key=\"calendarKey\">\n      <div class=\"bg-white rounded-lg shadow-lg\"\n      v-for=\"calDay in calDays\" :key=\"calDay.day\">\n        <button @click =\"addAppt(calDay.day)\">{{calDay.day}}</button>\n            <div v-if=\"showAppointments\">\n            <!-- <div v-for=\"appt in result.getAppointments.filter(item => item.date === `${yr}-${mo}-${calDay.day}`)\" :key=\"appt._id\"> -->\n            <div v-for=\"appt in appointments.filter(item => item.date === `${yr}-${mo}-${calDay.day}`)\" :key=\"appt._id\">\n              <CardDay v-bind:dayDetails=\"appt\"/>\n              <!-- <p>{{appt}}</p> -->\n            </div>\n        </div>\n\n      </div>\n  </div>\n\n    <div v-if=\"modalVisible ===  true\">\n    <ModalView>\n      <Meal class=\"z-50\"/>\n    </ModalView>\n      </div>\n</template>\n\n<script>\nimport Meal from '../../src/components/Meal'\nimport ModalView from '../../src/components/ModalView.vue'\nimport CardDay from '../../src/components/CardDay'\nimport { ref, onServerFetch, computed, watchEffect, watch } from 'vue'\nimport { useMealSelection } from '../../src/composables/meal.js'\nimport { useCalendar } from '../../src/composables/calendar.js'\nimport { result, useQuery } from '@vue/apollo-composable'\nimport getAppointments from '../graphql/getAppointments.query.gql'\nimport gql from 'graphql-tag'\nimport  { apolloClient } from '../main.js'\nexport default {\nsetup(props, context) {\n  let calendar = useCalendar()\n  // let appts = ref([])\n  const mealSelection = useMealSelection()\n  calendar.setInitialMo()\n  calendar.setInitialYr()\n  // let yr = ref('')\n  let reload = false\n  let cardDayKey = ref(0)\n  let calendarKey = ref(0)\n  let yr = ref(calendar.yrGetter)\n  let mo = ref(calendar.moGetter)\n  let apptsFrUseResult = ref(null)\n  let calDays = ref({})\n   let appointments = ref([])\n   let showAppointments = ref(false)\nconst fetchPolicy = ref('cache-first')\nlet datesArr = calendar.createQueryDatesArr(mo.value, yr.value)\nlet mosSearched = new Set()\n\n    const addAppt = (day) => {\n      // debugger\n      mealSelection.setYear(calendar.yrGetter)\n      mealSelection.setMonth(calendar.moGetter)\n      mealSelection.setDay(day)\n      mealSelection.setDate()\n      mealSelection.setModMode('add')\n      // const dummyAppt = {appt: {date: \"d date\", meal: \"d meal\", details: \"d details\", kitchen: \"d kitchen\", user: \"d user\" }}\n      // const m = mealSelection.setMeal(dummyAppt)\n    mealSelection.makeModalVisible()\n      // console.log(m)\n      let mm = mealSelection.getModMode\n      console.log(mm)\n    }\n\n  const hideModal = function () {\n    mealSelection.hideModal()\n  }\n  calendar.setUpCalendarSquares()\n\n\n    const READ_APPTS_CACHE_ID = gql`\n  query readApptsCacheId ($id: ID!) {\n    appts @client (_id: $id) {\n        _id\n        meal\n        details\n    }\n  }\n  `\n\n  const readApptsQuery = gql `\n    {\n      Appointments @client {\n        date\n        meal\n        details\n      }\n    }\n  `\n\n  let cachedAppts = ref('initial value')\n\n  const READ_APPTS_CACHE_DATE = gql`\nquery getAppointments($date: [String!]) {\n  getAppointments @client (date: $date)\n    {\n        _id\n        kitchen\n        user\n        date\n        meal\n        details\n      }\n}\n  `\n  const readCache = () => {\n    debugger\n    console.dir(apolloClient)\n    console.dir(Object.entries(apolloClient.cache.data.data))\n    const entries = Object.entries(apolloClient.cache.data.data)\n    const fe = entries.filter(k => k[0].substring(0,11) === 'Appointment')\n    console.log(fe)\n    const fem = fe.filter(i => i.substring(5,8) === mo.value)\n    console.log(fem)\n    // const updatedAppts = apolloClient.cache.data.filter(a => a.Appointment)\n//     datesArr = calendar.createQueryDatesArr('01', '2022')\n//     cachedAppts.value  = apolloClient.cache.readQuery({\n//       query: READ_APPTS_CACHE_ID,\n//       variables: {\n//         _id: \"61d28e88227ace4a474e8640\"\n//       }\n//     })\n// debugger\n\n  }\n\n  const switchMo = (direction) => {\n    // debugger\n    calendar.diffMo(direction)\n    datesArr = calendar.createQueryDatesArr(mo.value, yr.value)\n    runQuery()\n  }\n\ncalendar.setUpCalendarSquares()\n\nconst runQuery = () => {\n// debugger\nconst { result, variables, onResult } = useQuery(getAppointments,\n      { date: datesArr },\n      { fetchPolicy: 'cache-first' },\n      { options: {\n          resultCaching: false\n        }\n      }\n    )\n\n\n// appointments.value = useResult(result)\nwatchEffect(()  => {\n  // debugger\n\n  console.log(result.value)\n  if (result.value) {\n    // debugger\n    showAppointments.value = true\n    appointments.value = result.value.getAppointments\n  }\n})\n}\n\nrunQuery()\n\n\n\n// const appointments = computed(() =>result)\n\n// watch(result, () => {\n//   if (!result){\n//   return;\n// }\n//   appointments.value = result\n//   console.log(appointments.value)\n// }, {\n//   immediate: true\n// }\n// )\n\n\n    return {\n      calDays: calendar.calDaysGetter,\n      yr,\n      mo,\n      mText: calendar.moTextGetter,\n      modalVisible: mealSelection.getModalVisibility,\n      hideModal,\n      cardDayKey,\n      calendarKey,\n      addAppt,\n      switchMo,\n      apptsFrUseResult,\n      result,\n      appointments,\n      showAppointments,\n      forceRerender: calendar.forceRerenderGetter,\n      readCache,\n      cachedAppts\n    }\n},\n  name: \"GetKitchen\",\n  components: {\n    CardDay,\n    ModalView,\n    Meal\n  },\n  methods: {\n    update() {\n      debugger\n      this.$forceUpdate()\n    },\n\n  readCache2() {\n    const READ_APPTS_CACHE_DATE = gql`\n    query readApptsCacheDate($date: String!) {\n    appts(date: $date) {\n        date\n        meal\n        details\n    }\n\n  }\n  `\n\n    const READ_APPTS_CACHE_ID = gql`\n      query readApptsCacheId($id: ID!) {\n      appts(_id: $id) {\n        _id\n        meal\n        details\n    }\n\n  }\n  `\n    debugger\n    console.dir(apolloClient)\n\n    let cachedAppts2  = apolloClient.readQuery({\n      query: READ_APPTS_CACHE_ID,\n      variables: {\n        _id: \"61d28e88227ace4a474e8640\"\n      }\n    })\n\n    console.log(cachedAppts2)\n  }\n  }\n\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>\n"]}]}