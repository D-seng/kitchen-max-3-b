{"remainingRequest":"/Users/darrensenger/workspace/current/kitchen-max-3-b/client/node_modules/babel-loader/lib/index.js!/Users/darrensenger/workspace/current/kitchen-max-3-b/client/node_modules/eslint-loader/index.js??ref--14-0!/Users/darrensenger/workspace/current/kitchen-max-3-b/client/src/composables/externalSetup.js","dependencies":[{"path":"/Users/darrensenger/workspace/current/kitchen-max-3-b/client/src/composables/externalSetup.js","mtime":1638459620418},{"path":"/Users/darrensenger/workspace/current/kitchen-max-3-b/client/node_modules/cache-loader/dist/cjs.js","mtime":1638459943317},{"path":"/Users/darrensenger/workspace/current/kitchen-max-3-b/client/node_modules/babel-loader/lib/index.js","mtime":1638459947335},{"path":"/Users/darrensenger/workspace/current/kitchen-max-3-b/client/node_modules/eslint-loader/index.js","mtime":1638459943811}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2RhcnJlbnNlbmdlci93b3Jrc3BhY2UvY3VycmVudC9raXRjaGVuLW1heC0zLWIvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9kYXJyZW5zZW5nZXIvd29ya3NwYWNlL2N1cnJlbnQva2l0Y2hlbi1tYXgtMy1iL2NsaWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IHJlZiwgcmVhY3RpdmUsIHRvUmVmcywgd2F0Y2ggfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VRdWVyeSwgdXNlUmVzdWx0LCBvblJlc3VsdCB9IGZyb20gJ0B2dWUvYXBvbGxvLWNvbXBvc2FibGUnOwppbXBvcnQgZ2V0Q3VycmVudFVzZXJGcm9tVG9rZW4gZnJvbSAnLi4vZ3JhcGhxbC9nZXRDdXJyZW50VXNlckZyb21Ub2tlbi5xdWVyeS5ncWwnOwppbXBvcnQgZ2V0S2l0Y2hlbnMgZnJvbSAnLi4vZ3JhcGhxbC9nZXRLaXRjaGVucy5xdWVyeS5ncWwnOwppbXBvcnQgeyB1c2VyU3RhdGUgfSBmcm9tICcuL3VzZXJDZW50cmFsLmpzJzsKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZXh0ZXJuYWxTZXR1cCgpIHsKICAvLyBjb25zdCB0b2tlbiA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKQogIHZhciBzdGF0ZSA9IHJlYWN0aXZlKHsKICAgIG15X3RoaW5nOiBudWxsCiAgfSk7CgogIHZhciB2YWxpZGF0ZUJ5VG9rZW4gPSBmdW5jdGlvbiB2YWxpZGF0ZUJ5VG9rZW4oKSB7CiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIHZhcmlhYmxlcyA9IHJlZih7CiAgICAgICAgdG9rZW46IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKQogICAgICB9KTsKICAgICAgdmFyIG9wdGlvbnMgPSByZWYoewogICAgICAgIGZldGNoUG9saWN5OiAnbmV0d29yay1vbmx5JwogICAgICB9KTsKCiAgICAgIHZhciBfdXNlUXVlcnkgPSB1c2VRdWVyeShnZXRDdXJyZW50VXNlckZyb21Ub2tlbiwgdmFyaWFibGVzLCBvcHRpb25zKSwKICAgICAgICAgIG9uUmVzdWx0ID0gX3VzZVF1ZXJ5Lm9uUmVzdWx0OwoKICAgICAgb25SZXN1bHQoZnVuY3Rpb24gKHF1ZXJ5UmVzdWx0KSB7CiAgICAgICAgaWYgKCdlcnJvcicgaW4gcXVlcnlSZXN1bHQpIHsKICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ3Byb2cgZXJyLS1Db3VsZCBub3QgZ2V0IHRoZSBxdWVyeVJlc3VsdCEnKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXR1cm5WYWx1ZScsIHF1ZXJ5UmVzdWx0LmRhdGEpOwogICAgICAgICAgdXNlclN0YXRlLnVzZXJJZCA9IHF1ZXJ5UmVzdWx0LmRhdGEuZ2V0Q3VycmVudFVzZXJGcm9tVG9rZW4udXNlcklkOwogICAgICAgICAgcmVzb2x2ZShxdWVyeVJlc3VsdC5kYXRhKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgICByZXR1cm4gcHJvbWlzZTsKICB9OwoKICB2YXIgZmV0Y2hTb21ldGhpbmcgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodG9rZW4pIHsKICAgICAgdmFyIF91c2VRdWVyeTIsIHJlc3VsdCwgbG9hZGluZywgZXJyb3IsIG10OwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGRlYnVnZ2VyOwogICAgICAgICAgICAgIF91c2VRdWVyeTIgPSB1c2VRdWVyeShnZXRLaXRjaGVucywgbnVsbCwgewogICAgICAgICAgICAgICAgZmV0Y2hQb2xpY3k6ICduZXR3b3JrLW9ubHknIC8vIGNoZWNrIGZvciBvdGhlciBhdmFpbGFibGUgb3B0aW9ucwoKICAgICAgICAgICAgICB9KSwgcmVzdWx0ID0gX3VzZVF1ZXJ5Mi5yZXN1bHQsIGxvYWRpbmcgPSBfdXNlUXVlcnkyLmxvYWRpbmcsIGVycm9yID0gX3VzZVF1ZXJ5Mi5lcnJvcjsgLy8gY29uc3QgeyByZXN1bHQsIGxvYWRpbmcsIGVycm9yIH0gPSB1c2VRdWVyeShnZXRLaXRjaGVucykKCiAgICAgICAgICAgICAgZGVidWdnZXI7IC8vIFNldCB1cCB5b3VyIHN0YXRlCiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzdWx0KQoKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpOwogICAgICAgICAgICAgIHN0YXRlLm15X3RoaW5nID0gdXNlUmVzdWx0KHJlc3VsdCwgbnVsbCwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmdldEtpdGNoZW5zOwogICAgICAgICAgICAgIH0pOyAvLyAnZGF0YS5teV90aGluZycgY2FuIGJlIHdoYXRldmVyIHRoZSBub2RlIGlzIG5hbWVkIGluIHlvdXIgYXBpIGdxbAoKICAgICAgICAgICAgICBkZWJ1Z2dlcjsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzdGF0ZS5teV90aGluZyk7CiAgICAgICAgICAgICAgbXQgPSBzdGF0ZS5teV90aGluZzsgLy8gcmV0dXJuIHsgbXQsIGxvYWRpbmcsIGVycm9yIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgbXQ6IG10CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiBmZXRjaFNvbWV0aGluZyhfeCkgewogICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7IC8vIHJldHVybiBhIHJlYWN0aXZlIHN0YXRlIGFuZCB0aGUgZmV0Y2ggYXN5bmMgbWV0aG9kCgoKICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0b1JlZnMoc3RhdGUpKSwge30sIHsKICAgIHZhbGlkYXRlQnlUb2tlbjogdmFsaWRhdGVCeVRva2VuLAogICAgZmV0Y2hTb21ldGhpbmc6IGZldGNoU29tZXRoaW5nCiAgfSk7Cn0="},{"version":3,"sources":["/Users/darrensenger/workspace/current/kitchen-max-3-b/client/src/composables/externalSetup.js"],"names":["ref","reactive","toRefs","watch","useQuery","useResult","onResult","getCurrentUserFromToken","getKitchens","userState","externalSetup","state","my_thing","validateByToken","promise","Promise","resolve","reject","variables","token","window","localStorage","getItem","options","fetchPolicy","queryResult","Error","console","log","data","userId","fetchSomething","result","loading","error","mt"],"mappings":";;;;AAAA,SAASA,GAAT,EAAcC,QAAd,EAAwBC,MAAxB,EAAgCC,KAAhC,QAA6C,KAA7C;AACA,SAASC,QAAT,EAAmBC,SAAnB,EAA8BC,QAA9B,QAA8C,wBAA9C;AACA,OAAOC,uBAAP,MAAoC,8CAApC;AACA,OAAOC,WAAP,MAAwB,kCAAxB;AACA,SAASC,SAAT,QAA0B,kBAA1B;AAEA,eAAe,SAASC,aAAT,GAA0B;AACvC;AACA,MAAMC,KAAK,GAAGV,QAAQ,CAAC;AACrBW,IAAAA,QAAQ,EAAE;AADW,GAAD,CAAtB;;AAIA,MAAMC,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC5B,QAAMC,OAAO,GAAG,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AACrD,UAAMC,SAAS,GAAGlB,GAAG,CAAC;AACpBmB,QAAAA,KAAK,EAAEC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B;AADa,OAAD,CAArB;AAGA,UAAMC,OAAO,GAAGvB,GAAG,CAAC;AAClBwB,QAAAA,WAAW,EAAE;AADK,OAAD,CAAnB;;AAGA,sBAAqBpB,QAAQ,CAC3BG,uBAD2B,EAE3BW,SAF2B,EAG3BK,OAH2B,CAA7B;AAAA,UAAQjB,QAAR,aAAQA,QAAR;;AAMAA,MAAAA,QAAQ,CAAC,UAAAmB,WAAW,EAAI;AACtB,YAAI,WAAWA,WAAf,EAA4B;AAC1BR,UAAAA,MAAM,CAAC,IAAIS,KAAJ,CAAU,0CAAV,CAAD,CAAN;AACD,SAFD,MAEO;AACLC,UAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BH,WAAW,CAACI,IAAvC;AACApB,UAAAA,SAAS,CAACqB,MAAV,GAAmBL,WAAW,CAACI,IAAZ,CAAiBtB,uBAAjB,CAAyCuB,MAA5D;AACAd,UAAAA,OAAO,CAACS,WAAW,CAACI,IAAb,CAAP;AACD;AACF,OARO,CAAR;AASD,KAtBe,CAAhB;AAuBA,WAAOf,OAAP;AACD,GAzBD;;AA0BA,MAAMiB,cAAc;AAAA,uEAAG,iBAAOZ,KAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AACrB;AADqB,2BAEcf,QAAQ,CAACI,WAAD,EAAc,IAAd,EAAoB;AAC7DgB,gBAAAA,WAAW,EAAE,cADgD,CACjC;;AADiC,eAApB,CAFtB,EAEbQ,MAFa,cAEbA,MAFa,EAELC,OAFK,cAELA,OAFK,EAEIC,KAFJ,cAEIA,KAFJ,EAKrB;;AACA,uBANqB,CAOrB;AACA;;AACAP,cAAAA,OAAO,CAACC,GAAR,CAAYI,MAAZ;AACArB,cAAAA,KAAK,CAACC,QAAN,GAAiBP,SAAS,CAAC2B,MAAD,EAAS,IAAT,EAAe,UAAAH,IAAI;AAAA,uBAAIA,IAAI,CAACrB,WAAT;AAAA,eAAnB,CAA1B,CAVqB,CAU8C;;AACnE;AACAmB,cAAAA,OAAO,CAACC,GAAR,CAAYjB,KAAK,CAACC,QAAlB;AACMuB,cAAAA,EAbe,GAaVxB,KAAK,CAACC,QAbI,EAcrB;;AAdqB,+CAed;AAAEuB,gBAAAA,EAAE,EAAFA;AAAF,eAfc;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAdJ,cAAc;AAAA;AAAA;AAAA,KAApB,CAhCuC,CAkDvC;;;AACA,yCAAY7B,MAAM,CAACS,KAAD,CAAlB;AAA2BE,IAAAA,eAAe,EAAfA,eAA3B;AAA4CkB,IAAAA,cAAc,EAAdA;AAA5C;AACD","sourcesContent":["import { ref, reactive, toRefs, watch } from 'vue'\nimport { useQuery, useResult, onResult } from '@vue/apollo-composable'\nimport getCurrentUserFromToken from '../graphql/getCurrentUserFromToken.query.gql'\nimport getKitchens from '../graphql/getKitchens.query.gql'\nimport { userState } from './userCentral.js'\n\nexport default function externalSetup () {\n  // const token = window.localStorage.getItem('token')\n  const state = reactive({\n    my_thing: null\n  })\n\n  const validateByToken = () => {\n    const promise = new Promise(function (resolve, reject) {\n      const variables = ref({\n        token: window.localStorage.getItem('token')\n      })\n      const options = ref({\n        fetchPolicy: 'network-only'\n      })\n      const { onResult } = useQuery(\n        getCurrentUserFromToken,\n        variables,\n        options\n      )\n\n      onResult(queryResult => {\n        if ('error' in queryResult) {\n          reject(new Error('prog err--Could not get the queryResult!'))\n        } else {\n          console.log('returnValue', queryResult.data)\n          userState.userId = queryResult.data.getCurrentUserFromToken.userId\n          resolve(queryResult.data)\n        }\n      })\n    })\n    return promise\n  }\n  const fetchSomething = async (token) => {\n    debugger\n    const { result, loading, error } = useQuery(getKitchens, null, {\n      fetchPolicy: 'network-only' // check for other available options\n    })\n    // const { result, loading, error } = useQuery(getKitchens)\n    debugger\n    // Set up your state\n    // console.log(result)\n    console.log(result)\n    state.my_thing = useResult(result, null, data => data.getKitchens) // 'data.my_thing' can be whatever the node is named in your api gql\n    debugger\n    console.log(state.my_thing)\n    const mt = state.my_thing\n    // return { mt, loading, error }\n    return { mt }\n  }\n\n  // return a reactive state and the fetch async method\n  return { ...toRefs(state), validateByToken, fetchSomething }\n}\n"]}]}