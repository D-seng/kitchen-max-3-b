{"remainingRequest":"/Users/darrensenger/workspace/current/kitchen-max-3-b/client/node_modules/babel-loader/lib/index.js!/Users/darrensenger/workspace/current/kitchen-max-3-b/client/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/darrensenger/workspace/current/kitchen-max-3-b/client/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/darrensenger/workspace/current/kitchen-max-3-b/client/src/components/Calendar2.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/darrensenger/workspace/current/kitchen-max-3-b/client/src/components/Calendar2.vue","mtime":1641310718704},{"path":"/Users/darrensenger/workspace/current/kitchen-max-3-b/client/node_modules/cache-loader/dist/cjs.js","mtime":1638459943317},{"path":"/Users/darrensenger/workspace/current/kitchen-max-3-b/client/node_modules/babel-loader/lib/index.js","mtime":1638459947335},{"path":"/Users/darrensenger/workspace/current/kitchen-max-3-b/client/node_modules/cache-loader/dist/cjs.js","mtime":1638459943317},{"path":"/Users/darrensenger/workspace/current/kitchen-max-3-b/client/node_modules/vue-loader-v16/dist/index.js","mtime":1638459949352}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IE1lYWwgZnJvbSAnLi4vLi4vc3JjL2NvbXBvbmVudHMvTWVhbCc7CmltcG9ydCBNb2RhbFZpZXcgZnJvbSAnLi4vLi4vc3JjL2NvbXBvbmVudHMvTW9kYWxWaWV3LnZ1ZSc7CmltcG9ydCBDYXJkRGF5IGZyb20gJy4uLy4uL3NyYy9jb21wb25lbnRzL0NhcmREYXknOwppbXBvcnQgeyByZWYsIG9uU2VydmVyRmV0Y2gsIGNvbXB1dGVkLCB3YXRjaEVmZmVjdCwgd2F0Y2ggfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VNZWFsU2VsZWN0aW9uIH0gZnJvbSAnLi4vLi4vc3JjL2NvbXBvc2FibGVzL21lYWwuanMnOwppbXBvcnQgeyB1c2VDYWxlbmRhciB9IGZyb20gJy4uLy4uL3NyYy9jb21wb3NhYmxlcy9jYWxlbmRhci5qcyc7CmltcG9ydCB7IHVzZU11dGF0aW9uLCB1c2VRdWVyeSwgcmVzdWx0LCB2YXJpYWJsZXMsIG9uRG9uZSwgb25SZXN1bHQsIG9uRXJyb3IsIHVzZVJlc3VsdCB9IGZyb20gJ0B2dWUvYXBvbGxvLWNvbXBvc2FibGUnOwppbXBvcnQgZ2V0QXBwb2ludG1lbnRzIGZyb20gJy4uL2dyYXBocWwvZ2V0QXBwb2ludG1lbnRzLnF1ZXJ5LmdxbCc7CmV4cG9ydCBkZWZhdWx0IHsKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAocHJvcHMsIGNvbnRleHQpIHsKICAgIHZhciBjYWxlbmRhciA9IHVzZUNhbGVuZGFyKCk7IC8vIGxldCBhcHB0cyA9IHJlZihbXSkKCiAgICB2YXIgbWVhbFNlbGVjdGlvbiA9IHVzZU1lYWxTZWxlY3Rpb24oKTsKICAgIGNhbGVuZGFyLnNldEluaXRpYWxNbygpOwogICAgY2FsZW5kYXIuc2V0SW5pdGlhbFlyKCk7IC8vIGxldCB5ciA9IHJlZignJykKCiAgICB2YXIgcmVsb2FkID0gZmFsc2U7CiAgICB2YXIgY2FyZERheUtleSA9IHJlZigwKTsKICAgIHZhciBjYWxlbmRhcktleSA9IHJlZigwKTsKICAgIHZhciB5ciA9IHJlZihjYWxlbmRhci55ckdldHRlcik7CiAgICB2YXIgbW8gPSByZWYoY2FsZW5kYXIubW9HZXR0ZXIpOwogICAgdmFyIGFwcHRzRnJVc2VSZXN1bHQgPSByZWYobnVsbCk7CiAgICB2YXIgY2FsRGF5cyA9IHJlZih7fSk7CiAgICB2YXIgYXBwb2ludG1lbnRzID0gcmVmKFtdKTsKICAgIHZhciBmZXRjaFBvbGljeSA9IHJlZignY2FjaGUtZmlyc3QnKTsKICAgIHZhciBkYXRlc0FyciA9IGNhbGVuZGFyLmNyZWF0ZVF1ZXJ5RGF0ZXNBcnIobW8udmFsdWUsIHlyLnZhbHVlKTsKCiAgICB2YXIgYWRkQXBwdCA9IGZ1bmN0aW9uIGFkZEFwcHQoZGF5KSB7CiAgICAgIC8vIGRlYnVnZ2VyCiAgICAgIG1lYWxTZWxlY3Rpb24uc2V0WWVhcihjYWxlbmRhci55ckdldHRlcik7CiAgICAgIG1lYWxTZWxlY3Rpb24uc2V0TW9udGgoY2FsZW5kYXIubW9HZXR0ZXIpOwogICAgICBtZWFsU2VsZWN0aW9uLnNldERheShkYXkpOwogICAgICBtZWFsU2VsZWN0aW9uLnNldERhdGUoKTsKICAgICAgbWVhbFNlbGVjdGlvbi5zZXRNb2RNb2RlKCdhZGQnKTsgLy8gY29uc3QgZHVtbXlBcHB0ID0ge2FwcHQ6IHtkYXRlOiAiZCBkYXRlIiwgbWVhbDogImQgbWVhbCIsIGRldGFpbHM6ICJkIGRldGFpbHMiLCBraXRjaGVuOiAiZCBraXRjaGVuIiwgdXNlcjogImQgdXNlciIgfX0KICAgICAgLy8gY29uc3QgbSA9IG1lYWxTZWxlY3Rpb24uc2V0TWVhbChkdW1teUFwcHQpCgogICAgICBtZWFsU2VsZWN0aW9uLm1ha2VNb2RhbFZpc2libGUoKTsgLy8gY29uc29sZS5sb2cobSkKCiAgICAgIHZhciBtbSA9IG1lYWxTZWxlY3Rpb24uZ2V0TW9kTW9kZTsKICAgICAgY29uc29sZS5sb2cobW0pOwogICAgfTsKCiAgICB2YXIgaGlkZU1vZGFsID0gZnVuY3Rpb24gaGlkZU1vZGFsKCkgewogICAgICBtZWFsU2VsZWN0aW9uLmhpZGVNb2RhbCgpOwogICAgfTsKCiAgICBjYWxlbmRhci5zZXRVcENhbGVuZGFyU3F1YXJlcygpOwoKICAgIHZhciBzd2l0Y2hNbyA9IGZ1bmN0aW9uIHN3aXRjaE1vKGRpcmVjdGlvbikgewogICAgICBkZWJ1Z2dlcjsKICAgICAgY2FsZW5kYXIuZGlmZk1vKGRpcmVjdGlvbik7CiAgICAgIGRhdGVzQXJyID0gY2FsZW5kYXIuY3JlYXRlUXVlcnlEYXRlc0Fycihtby52YWx1ZSwgeXIudmFsdWUpOyAvLyB2YXJpYWJsZXMudmFsdWUuZGF0ZSA9IGRhdGVzQXJyCgogICAgICBydW5RdWVyeSgpOwogICAgfTsKCiAgICBjYWxlbmRhci5zZXRVcENhbGVuZGFyU3F1YXJlcygpOwoKICAgIHZhciBfdXNlUXVlcnkgPSB1c2VRdWVyeShnZXRBcHBvaW50bWVudHMsIHsKICAgICAgZGF0ZTogZGF0ZXNBcnIKICAgIH0sIHsKICAgICAgZmV0Y2hQb2xpY3k6ICdjYWNoZS1maXJzdCcKICAgIH0pLAogICAgICAgIHJlc3VsdCA9IF91c2VRdWVyeS5yZXN1bHQsCiAgICAgICAgdmFyaWFibGVzID0gX3VzZVF1ZXJ5LnZhcmlhYmxlcywKICAgICAgICBvblJlc3VsdCA9IF91c2VRdWVyeS5vblJlc3VsdDsgLy8gYXBwb2ludG1lbnRzLnZhbHVlID0gdXNlUmVzdWx0KHJlc3VsdCkKCgogICAgd2F0Y2gocmVzdWx0LCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghcmVzdWx0KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBhcHBvaW50bWVudHMudmFsdWUgPSByZXN1bHQ7CiAgICAgIGNvbnNvbGUubG9nKGFwcG9pbnRtZW50cy52YWx1ZSk7CiAgICB9LCB7CiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfSk7CiAgICByZXR1cm4gewogICAgICBjYWxEYXlzOiBjYWxlbmRhci5jYWxEYXlzR2V0dGVyLAogICAgICB5cjogeXIsCiAgICAgIG1vOiBtbywKICAgICAgbVRleHQ6IGNhbGVuZGFyLm1vVGV4dEdldHRlciwKICAgICAgbW9kYWxWaXNpYmxlOiBtZWFsU2VsZWN0aW9uLmdldE1vZGFsVmlzaWJpbGl0eSwKICAgICAgaGlkZU1vZGFsOiBoaWRlTW9kYWwsCiAgICAgIGNhcmREYXlLZXk6IGNhcmREYXlLZXksCiAgICAgIGNhbGVuZGFyS2V5OiBjYWxlbmRhcktleSwKICAgICAgYWRkQXBwdDogYWRkQXBwdCwKICAgICAgc3dpdGNoTW86IHN3aXRjaE1vLAogICAgICBhcHB0c0ZyVXNlUmVzdWx0OiBhcHB0c0ZyVXNlUmVzdWx0LAogICAgICByZXN1bHQ6IHJlc3VsdCwKICAgICAgYXBwb2ludG1lbnRzOiBhcHBvaW50bWVudHMsCiAgICAgIGZvcmNlUmVyZW5kZXI6IGNhbGVuZGFyLmZvcmNlUmVyZW5kZXJHZXR0ZXIKICAgIH07CiAgfSwKICBuYW1lOiAiR2V0S2l0Y2hlbiIsCiAgY29tcG9uZW50czogewogICAgQ2FyZERheTogQ2FyZERheSwKICAgIE1vZGFsVmlldzogTW9kYWxWaWV3LAogICAgTWVhbDogTWVhbAogIH0sCiAgbWV0aG9kczogewogICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoKSB7CiAgICAgIGRlYnVnZ2VyOwogICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/darrensenger/workspace/current/kitchen-max-3-b/client/src/components/Calendar2.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n<h1>{{mText}} {{yr}}</h1>\n<p>{{appointments}}</p>\n    <p>{{modalVisible}}</p>\n    <button @click=\"switchMo('prev')\">Prev</button>\n    <button @click=\"switchMo('next')\">Next</button>\n\n     <div class=\"grid grid-flow-row grid-cols-7 grid-rows-7 gap-4\"\n     :key=\"calendarKey\">\n      <div class=\"bg-white rounded-lg shadow-lg\"\n      v-for=\"calDay in calDays\" :key=\"calDay.day\">\n        <button @click =\"addAppt(calDay.day)\">{{calDay.day}}</button>\n          <div v-if=\"appointments\">\n            <!-- <div v-for=\"appt in result.getAppointments.filter(item => item.date === `${yr}-${mo}-${calDay.day}`)\" :key=\"appt._id\"> -->\n            <div v-for=\"appt in appointments.filter(item => item.date === `${yr}-${mo}-${calDay.day}`)\" :key=\"appt._id\">\n              <CardDay :dayDetails=\"appt\"/>\n            </div>\n        </div>\n\n      </div>\n  </div>\n\n    <div v-if=\"modalVisible ===  true\">\n    <ModalView>\n      <Meal class=\"z-50\"/>\n    </ModalView>\n      </div>\n</template>\n\n<script>\nimport Meal from '../../src/components/Meal'\nimport ModalView from '../../src/components/ModalView.vue'\nimport CardDay from '../../src/components/CardDay'\nimport { ref, onServerFetch, computed, watchEffect, watch } from 'vue'\nimport { useMealSelection } from '../../src/composables/meal.js'\nimport { useCalendar } from '../../src/composables/calendar.js'\nimport { useMutation, useQuery, result, variables, onDone, onResult, onError, useResult } from '@vue/apollo-composable'\nimport getAppointments from '../graphql/getAppointments.query.gql'\n\nexport default {\nsetup(props, context) {\n  let calendar = useCalendar()\n  // let appts = ref([])\n  const mealSelection = useMealSelection()\n  calendar.setInitialMo()\n  calendar.setInitialYr()\n  // let yr = ref('')\n  let reload = false\n  let cardDayKey = ref(0)\n  let calendarKey = ref(0)\n  let yr = ref(calendar.yrGetter)\n  let mo = ref(calendar.moGetter)\n  let apptsFrUseResult = ref(null)\n  let calDays = ref({})\n\nlet appointments = ref([])\nconst fetchPolicy = ref('cache-first')\nlet datesArr = calendar.createQueryDatesArr(mo.value, yr.value)\n\n    const addAppt = (day) => {\n      // debugger\n      mealSelection.setYear(calendar.yrGetter)\n      mealSelection.setMonth(calendar.moGetter)\n      mealSelection.setDay(day)\n      mealSelection.setDate()\n      mealSelection.setModMode('add')\n      // const dummyAppt = {appt: {date: \"d date\", meal: \"d meal\", details: \"d details\", kitchen: \"d kitchen\", user: \"d user\" }}\n      // const m = mealSelection.setMeal(dummyAppt)\n    mealSelection.makeModalVisible()\n      // console.log(m)\n      let mm = mealSelection.getModMode\n      console.log(mm)\n    }\n\n  const hideModal = function () {\n    mealSelection.hideModal()\n  }\n  calendar.setUpCalendarSquares()\n\n  const switchMo = (direction) => {\n    debugger\n    calendar.diffMo(direction)\n    datesArr = calendar.createQueryDatesArr(mo.value, yr.value)\n    // variables.value.date = datesArr\n    runQuery()\n  }\n\n\ncalendar.setUpCalendarSquares()\n\nconst { result, variables, onResult } = useQuery(getAppointments,\n      { date: datesArr },\n      { fetchPolicy: 'cache-first' }\n    )\n    // appointments.value = useResult(result)\n\nwatch(result, () => {\n  if (!result){\n  return;\n}\n  appointments.value = result\n  console.log(appointments.value)\n}, {\n  immediate: true\n}\n)\n\n\n    return {\n      calDays: calendar.calDaysGetter,\n      yr,\n      mo,\n      mText: calendar.moTextGetter,\n      modalVisible: mealSelection.getModalVisibility,\n      hideModal,\n      cardDayKey,\n      calendarKey,\n      addAppt,\n      switchMo,\n      apptsFrUseResult,\n      result,\n      appointments,\n      forceRerender: calendar.forceRerenderGetter\n    }\n},\n  name: \"GetKitchen\",\n  components: {\n    CardDay,\n    ModalView,\n    Meal\n  },\n  methods: {\n    update() {\n      debugger\n      this.$forceUpdate()\n    }\n  }\n\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>\n"],"sourceRoot":""}]}